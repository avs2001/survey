# AGENTS.md

> Standards and responsibilities for AI-powered agents in the **Sephora Accelerate Program** using **Angular 20**, Signals-first architecture, and AI development agents powered by Codex.

---

## Purpose

This document outlines a standardized framework for **AI-powered development agents** that assist in building and maintaining Angular 20 applications for the **Sephora Accelerate Program**.  
Agents are responsible for both **developer support** (code generation/refactor) and **end-user experiences** (smart UI components powered by AI).

---

## Technology Stack

| Layer              | Stack                          |
|-------------------|---------------------------------|
| Framework          | Angular 20                     |
| Language           | TypeScript, SCSS, HTML         |
| Architecture       | Standalone components, feature-first, Signals-first |
| State              | Signals (`signal`, `computed`, `effect`, `model`) |
| Async              | `resource()` with fallback UX  |
| Component Strategy | Control Flow, `@defer`, `@if`, `@switch` |
| Tooling            | Angular CLI, ESLint, Prettier, Codex |
| Libraries          | `@kebormed/core`, `@kebormed/kit` |
| Testing            | Jest for unit tests, Playwright for E2E |

---

## Agent Responsibilities

### ğŸ§  Developer Agents (via Codex)

Codex agents must:

- Generate new standalone components with proper selector, Signals, `model()`, and typed inputs/outputs.
- Use `inject()` for DI.
- Scaffold new features inside `@kebormed/kit` using our layered folder structure.
- Wrap async logic with `resource()` and control rendering via `@defer`, `@loading`, and `@placeholder`.
- Automatically add meaningful unit tests using Jest (inputs/outputs, computed signals, resource flows).
- Ensure accessibility and test coverage.
- Avoid legacy patterns (no `ngModule`, no `rxjs` unless required).

**Required Output for Every Agent Task:**

- âœ… Component (standalone, signals-based)
- âœ… Template (control flow only, no complex inline logic)
- âœ… SCSS with component-specific styling
- âœ… Jest unit test
- âœ… If UI: add preview story or example usage

---

### ğŸ‘©â€âš•ï¸ End-User Agents (UX Components)

Agents must:

- Deliver **real-time insights**, **data summaries**, and **Q&A components** for physicians or patients.
- Load only when needed (`@defer` with `whenVisible` or `onIdle`).
- Display traceable AI content (`"Generated by AI"` badge).
- Allow users to refresh answers or ask follow-up questions.
- Use `NgOptimizedImage` for image content and performance.
- Expose signals for external integration via `model()`.

**End-user agent UX must:**

- âœ… Handle loading, error, and success states
- âœ… Be fully accessible (ARIA, keyboard nav)
- âœ… Be responsive (1440 â†’ mobile scale)
- âœ… Allow feedback (e.g. ğŸ‘ / ğŸ‘ for response usefulness)

---

## Folder & Naming Conventions

| Folder                     | Purpose                        |
|---------------------------|---------------------------------|
| `@kebormed/core`           | Reusable primitives (inputs, modals, UI) |
| `@kebormed/kit/agent-*`    | Feature-specific agents        |
| `agent-physician`          | Q&A and data insights for MD   |
| `agent-patient-summary`    | Health overview summaries      |
| `agent-dashboard-insights` | Smart cards, visual analytics  |

> Always follow kebab-case naming and place signals, templates, styles, and tests in same folder.

---

## Code Quality Checklist âœ…

| Category     | Criteria                          |
|--------------|-----------------------------------|
| âœ… Signals   | `signal`, `computed`, `model`, `resource` used properly |
| âœ… Template  | `@if`, `@switch`, `@defer` only â€“ no logic in bindings |
| âœ… Inputs    | Strong typing, proper defaults, `readonly` where needed |
| âœ… Styles    | Localized SCSS, use Tailwind when needed |
| âœ… Tests     | Jest unit test for all logic paths |
| âœ… A11y      | Screen reader tags, keyboard nav, ARIA roles |
| âœ… Perf      | Use `NgOptimizedImage`, lazy load agents |
| âœ… Trace     | "AI generated" disclosure for UX agents |

---

## Example Agent Tasks

### ğŸ§  Codex Agent: Developer Support

- ğŸ”§ Scaffold `agent-patient-summary` with:
  - `resource()` for backend AI data
  - `@defer` for rendering logic
  - Typed signals for inputs and computed outputs
- ğŸ§ª Generate unit test for rendering states and signal logic
- ğŸ“¦ Register component in feature route (`standalone: true`)

### ğŸ‘©â€âš•ï¸ UX Agent: Q&A Widget

- ğŸ¯ Create `agent-physician-qna.component.ts`
- ğŸ§µ Uses `resource()` to call backend AI endpoint
- ğŸ§  Shows previous interactions with AI via signal array
- ğŸ§ª Includes `jest` unit test and Playwright E2E script

---

## Agent Execution Example (Codex Prompt)

